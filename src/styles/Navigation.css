/* Small-screen burger button */
.mobile-burger {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    width: 40px;
    height: 40px;
    background: transparent;
    border: none;
    color: #fff;
    cursor: pointer;
}

/* hide explicitly on md+ (we use md:hidden in markup too) */
@media (min-width: 768px) {
    .mobile-burger {
        display: none;
    }
}

/* Brand centering on small screens; desktop grid will place it in column 1 */
.brand {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    text-decoration: none;
    background: transparent;
    border: none;
    padding: 0;
}

/* On mobile, center the brand horizontally (stronger selector, safe fallbacks) */
@media (max-width: 767px) {

    /* target the exact inner container to avoid being overridden elsewhere */
    nav>.container-w>.glass {
        max-width: 380px;
        display: flex;
        align-items: center;
        position: relative;
        /* for absolute centering */
        padding-left: 0.5rem;
        padding-right: 0.5rem;
    }

    /* Absolutely center the brand; limit its width so it never collides with the burger */
    nav>.container-w>.glass .brand {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        margin: 0;
        z-index: 20;
        pointer-events: auto;
        white-space: nowrap;
        display: inline-block;
        /* keep the brand from overflowing or overlapping the left burger:
           reserve ~88px (burger + a little gap) and let the brand shrink if needed */
        max-width: calc(100% - 88px);
        overflow: hidden;
        text-overflow: ellipsis;
    }

    /* Make sure the burger is on top and left-aligned */
    nav>.container-w>.glass .mobile-burger,
    .mobile-burger {
        position: relative;
        z-index: 30;
        margin-left: 0;
    }

    /* hide desktop nav center on mobile - keep safe */
    .nav-center {
        display: none !important;
    }

    /* tiny responsive tweak: if screen is very narrow, slightly reduce brand size */
    @media (max-width: 360px) {
        nav>.container-w>.glass .brand {
            font-size: 0.95rem;
        }
    }
}

@media (min-width: 1025px) {

    /* make the inner glass container a grid with left/center/right columns */
    nav .glass {
        display: grid;
        grid-template-columns: auto 1fr auto;
        align-items: center;
        gap: 1rem;
        max-width: 1210px;
        margin-left: auto;
        margin-right: auto;
        padding-left: 1rem;
        padding-right: 1rem;
    }

    /* Brand sits in the left column */
    nav .glass .brand {
        grid-column: 1 / 2;
        justify-self: start;
        margin: 0;
        /* ensure it's visible */
        position: static;
        transform: none;
        max-width: none;
    }
}

/* ---------- Desktop layout: center nav buttons ---------- */
/* Use a three-column grid so nav buttons can be centered on large screens */
@media (min-width: 768px) {

    /* make the inner glass container a grid with left/center/right columns */
    nav .glass {
        display: grid;
        grid-template-columns: auto 1fr auto;
        align-items: center;
        gap: 1rem;
        /* constrain width so centering looks consistent on very wide screens */
        max-width: 1210px;
        margin-left: auto;
        margin-right: auto;
        padding-left: 1rem;
        padding-right: 1rem;
    }

    /* Brand sits in the left column */
    nav .glass .brand {
        grid-column: 1 / 2;
        justify-self: start;
        margin: 0;
    }

    /* Nav center sits in the middle column and is centered horizontally */
    .nav-center {
        grid-column: 2 / 3;
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 0.75rem;
    }

    /* Nav right (e.g., actions) sits on the right */
    .nav-right {
        grid-column: 3 / 4;
        justify-self: end;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    /* Ensure mobile-only hiding doesn't break desktop visibility */
    .nav-center[style*="display:none"] {
        display: flex !important;
    }
}

/* ---------------- Mobile sidebar + overlay ---------------- */
/* overlay (covers viewport) */
.mobile-sidebar-overlay {
    position: fixed;
    inset: 0;
    background: rgba(2, 6, 23, 0.55);
    opacity: 0;
    transition: opacity 200ms ease;
    pointer-events: none;
    z-index: 50;
}

.mobile-sidebar-overlay.open {
    opacity: 1;
    pointer-events: auto;
}

/* sidebar panel (slides in from left) */
.mobile-sidebar {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: min(86vw, 320px);
    max-width: 320px;
    transform: translateX(-100%);
    transition: transform 300ms cubic-bezier(.2, .9, .2, 1);
    z-index: 60;
    display: block;
    /* keep the panel visually consistent with the inner mobile menu */
    padding: 1rem;
    box-sizing: border-box;
    /* allow background glass via inner element; keep this container minimal */
    pointer-events: none;
}

.mobile-sidebar.open {
    transform: translateX(0);
    pointer-events: auto;
}

/* reuse the existing mobile inner panel look (glass) */
.mobile-menu-inner {
    margin: 0;
    padding: 0.75rem;
    border-radius: 0.75rem;
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.01));
    border: 1px solid rgba(255, 255, 255, 0.06);
    -webkit-backdrop-filter: blur(8px);
    backdrop-filter: blur(8px);
    box-shadow: 0 20px 40px rgba(2, 6, 23, 0.6);
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    height: 100%;
}

/* Menu item */
.mobile-menu-item {
    display: block;
    text-align: left;
    padding: 0.6rem 0.75rem;
    border-radius: 0.5rem;
    background: transparent;
    color: rgba(255, 255, 255, 0.9);
    font-weight: 600;
    border: 1px solid transparent;
}

.mobile-menu-item:hover {
    background: rgba(255, 255, 255, 0.03);
}

/* Active menu item */
.mobile-menu-item.active {
    background: rgba(255, 255, 255, 0.06);
    color: #cfe8ff;
    /* subtle highlight */
    border-color: rgba(255, 255, 255, 0.08);
}

/* CTA area in mobile menu */
.mobile-menu-cta {
    margin-top: auto;
    /* push CTA to bottom of sidebar */
    display: flex;
    justify-content: flex-start;
}

/* avoid the menu overlapping the page content badly */
@media (max-width: 640px) {
    .mobile-menu-inner {
        margin: 0;
        padding: 0.5rem;
    }
}

/* keep these rules limited to mobile */
@media (min-width: 768px) {

    .mobile-sidebar,
    .mobile-sidebar-overlay {
        display: none !important;
    }
}